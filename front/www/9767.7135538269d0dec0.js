"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9767],{9767:(j,d,r)=>{r.r(d),r.d(d,{AvaliacaoEmpresaPageModule:()=>x});var p=r(2200),l=r(4341),s=r(9420),u=r(8132),f=r(467);class h{constructor(){this.id=0,this.idEmpresa=0,this.idUsuarioComum=0,this.nota=0,this.comentario="",this.dataAvaliacao=new Date}}var t=r(3664),c=r(8728),v=r(4192),_=r(5032),C=r(9330),P=r(2059);function M(i,g){if(1&i){const e=t.RV6();t.j41(0,"ion-icon",21),t.bIt("click",function(){const n=c.eBV(e).$implicit,o=t.XpG().index,m=t.XpG();return c.Njj(m.setRating(o,n))}),t.k0s()}if(2&i){const e=g.$implicit,a=t.XpG().$implicit;t.AVh("filled",a.rating>=e)}}function E(i,g){if(1&i){const e=t.RV6();t.j41(0,"div",6)(1,"div",7),t.bIt("click",function(){const n=c.eBV(e).$implicit,o=t.XpG();return c.Njj(o.verAvaliacoes(n.id))}),t.nrm(2,"img",8),t.j41(3,"div",9),t.nrm(4,"ion-icon",10),t.j41(5,"span"),t.EFF(6,"Ver avalia\xe7\xf5es"),t.k0s()()(),t.j41(7,"div",11)(8,"h3",12),t.EFF(9),t.k0s(),t.j41(10,"div",13)(11,"div",14),t.DNE(12,M,1,2,"ion-icon",15),t.k0s()(),t.j41(13,"div",16)(14,"ion-item",17)(15,"ion-input",18),t.mxI("ngModelChange",function(n){const o=c.eBV(e).$implicit;return t.DH7(o.comentario,n)||(o.comentario=n),c.Njj(n)}),t.k0s(),t.j41(16,"ion-button",19),t.bIt("click",function(){const n=c.eBV(e).index,o=t.XpG();return c.Njj(o.submitReview(n))}),t.nrm(17,"ion-icon",20),t.k0s()()()()()}if(2&i){const e=g.$implicit,a=t.XpG();t.R7$(2),t.Y8G("src",e.imagem,t.B4B),t.R7$(7),t.JRh(e.nome),t.R7$(3),t.Y8G("ngForOf",a.stars),t.R7$(3),t.R50("ngModel",e.comentario)}}const b=[{path:"",component:(()=>{class i{constructor(e,a,n,o,m,A,y){this.router=e,this.formBuilder=a,this.toastController=n,this.activatedRoute=o,this.navController=m,this.http=A,this.avaliacaoService=y,this.stars=[1,2,3,4,5],this.data=[{id:1,nome:"Biovale Reciclagem",rating:0,imagem:"../../../assets/icon/fundo-inicio 1.png",comentario:""},{id:2,nome:"EcoMetals",rating:0,imagem:"../../../assets/icon/fundo-inicio 1.png",comentario:""}],this.empresas=[...this.data],this.avaliacao=new h}ngOnInit(){}handleInput(e){const n=e.target.value?.toLowerCase()||"";this.empresas=""===n.trim()?[...this.data]:this.data.filter(o=>o.nome.toLowerCase().includes(n))}setRating(e,a){const n=this.empresas[e],o=this.data.find(m=>m.nome===n.nome);o&&(o.rating=a,n.rating=a)}submitReview(e){this.avaliacao.idEmpresa=this.empresas[e].id,this.avaliacao.nota=this.empresas[e].rating,this.avaliacao.comentario=this.empresas[e].comentario,this.avaliacao.dataAvaliacao=new Date;const a=this.empresas[e],n=this.data.find(o=>o.nome===a.nome);n&&(console.log(`Avalia\xe7\xe3o para ${n.nome}: ${n.rating} estrelas`),console.log(`Coment\xe1rio: ${n.comentario}`),this.avaliacaoService.enviarAvaliacao(this.avaliacao).subscribe({next:()=>this.exibirMensagem("Avalia\xe7\xe3o enviada com sucesso!"),error:()=>this.exibirMensagem("Erro ao enviar avalia\xe7\xe3o.")}),n.comentario="",n.rating=0,a.comentario="",a.rating=0)}verAvaliacoes(e){this.router.navigate(["/avaliacoes",e])}exibirMensagem(e){var a=this;return(0,f.A)(function*(){(yield a.toastController.create({message:e,duration:1500})).present()})()}static#t=this.\u0275fac=function(a){return new(a||i)(t.rXU(v.Ix),t.rXU(l.ok),t.rXU(s.K_),t.rXU(v.nX),t.rXU(_.q9),t.rXU(C.Qq),t.rXU(P.J))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-avaliacao-empresa"]],standalone:!1,decls:10,vars:2,consts:[["color","transparent"],[1,"ion-padding"],[1,"descricao-container"],[1,"descricao"],["placeholder","Pesquise uma empresa",1,"form-item",3,"ionInput","debounce"],["class","empresa-card",4,"ngFor","ngForOf"],[1,"empresa-card"],[1,"card-image",3,"click"],[3,"src"],[1,"image-overlay"],["name","eye-outline",1,"view-icon"],[1,"card-content"],[1,"card-title"],[1,"rating-container"],[1,"stars-rating"],["name","star","class","star",3,"filled","click",4,"ngFor","ngForOf"],[1,"comment-container"],["lines","none",1,"comment-item"],["type","text","placeholder","Comentario","maxlength","120",3,"ngModelChange","ngModel"],[3,"click"],["name","send",1,"icone-submit"],["name","star",1,"star",3,"click"]],template:function(a,n){1&a&&(t.nrm(0,"ion-toolbar",0),t.j41(1,"ion-content",1)(2,"div",2)(3,"p",3),t.EFF(4,'Bem-vindo \xe0 se\xe7\xe3o "Avalie Empresas" da plataforma EcoDesc! Aqui, voc\xea ter\xe1 a oportunidade de contribuir para a constru\xe7\xe3o de um mundo mais sustent\xe1vel, avaliando empresas do ramo de reciclagem com base em sua experi\xeancia pessoal.'),t.nrm(5,"br")(6,"br"),t.EFF(7," Sabemos que a escolha de empresas comprometidas com a reciclagem \xe9 fundamental para promover pr\xe1ticas ambientalmente respons\xe1veis e, por isso, oferecemos a voc\xea a chance de dar voz \xe0 sua opini\xe3o."),t.k0s()(),t.j41(8,"ion-searchbar",4),t.bIt("ionInput",function(m){return n.handleInput(m)}),t.k0s(),t.DNE(9,E,18,4,"div",5),t.k0s()),2&a&&(t.R7$(8),t.Y8G("debounce",1e3),t.R7$(),t.Y8G("ngForOf",n.empresas))},dependencies:[p.Sq,l.BC,l.tU,l.vS,s.Jm,s.W9,s.iq,s.$w,s.uz,s.S1,s.ai,s.Gw],styles:[".card-content[_ngcontent-%COMP%]{text-align:center}.card-image[_ngcontent-%COMP%]{position:relative;cursor:pointer;overflow:hidden;border-radius:15px 15px 0 0}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:auto;display:block;transition:transform .3s ease}.card-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#003554cc;display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease;gap:8px}.card-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   .view-icon[_ngcontent-%COMP%]{font-size:40px;color:#fff}.card-image[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-family:Outfit,sans-serif;font-size:16px;font-weight:500}.card-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.card-image[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin-bottom:1rem;color:#333;text-transform:capitalize}.rating-container[_ngcontent-%COMP%]{margin-top:1rem}.rating-label[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-bottom:.5rem}.stars-rating[_ngcontent-%COMP%]{justify-content:center;display:flex;gap:.2rem;margin-bottom:.5rem}.star[_ngcontent-%COMP%]{font-size:1.5rem;color:#8cbee3;cursor:pointer;transition:color .2s ease}.star.filled[_ngcontent-%COMP%]{color:gold}.star[_ngcontent-%COMP%]:hover{color:#ffed4e}.comment-container[_ngcontent-%COMP%]{display:block;margin-top:1.5rem;text-align:left}.comment-item[_ngcontent-%COMP%]{color:#003554;margin-bottom:20px;--background: rgba(140, 190, 227, .15);--border-radius: 15px;--border-style: none;--inner-border-width: 0;border-radius:15px;padding:10px}.char-counter[_ngcontent-%COMP%]{font-size:.8rem;color:#999;text-align:right;margin:0;padding-right:12px}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{font-size:.9rem}.icone-submit[_ngcontent-%COMP%]{font-size:1rem;color:#e0f9ff}ion-button[_ngcontent-%COMP%]{--border-radius: 30px;--background: #003554;justify-content:center}"]})}return i})()}];let O=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.$C({type:i});static#a=this.\u0275inj=c.G2t({imports:[u.iI.forChild(b),u.iI]})}return i})(),x=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.$C({type:i});static#a=this.\u0275inj=c.G2t({imports:[p.MD,l.YN,s.bv,O]})}return i})()}}]);