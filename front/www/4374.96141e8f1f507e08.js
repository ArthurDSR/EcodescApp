"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4374],{4374:(O,m,i)=>{i.r(m),i.d(m,{ChatbotPageModule:()=>P});var g=i(2200),d=i(4341),r=i(9420),u=i(8132),n=i(3664),c=i(8728),h=i(9330);function f(a,p){if(1&a&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&a){const t=n.XpG().$implicit;n.R7$(),n.JRh(t.texto)}}function b(a,p){1&a&&(n.j41(0,"div",12),n.nrm(1,"span")(2,"span")(3,"span"),n.k0s())}function x(a,p){if(1&a&&(n.j41(0,"div",8)(1,"div",9),n.DNE(2,f,2,1,"span",10)(3,b,4,0,"div",11),n.k0s()()),2&a){const t=p.$implicit;n.Y8G("ngClass",1===t.usuario?"msg-usuario":"msg-chatbot"),n.R7$(),n.AVh("digitando",t.digitando),n.R7$(),n.Y8G("ngIf",!t.digitando),n.R7$(),n.Y8G("ngIf",t.digitando)}}function C(a,p){if(1&a){const t=n.RV6();n.j41(0,"div",13)(1,"ion-input",14),n.mxI("ngModelChange",function(e){c.eBV(t);const s=n.XpG();return n.DH7(s.mensagemInput,e)||(s.mensagemInput=e),c.Njj(e)}),n.k0s(),n.j41(2,"ion-button",15),n.bIt("click",function(){c.eBV(t);const e=n.XpG();return c.Njj(e.enviarMensagem())}),n.nrm(3,"ion-icon",16),n.k0s()()}if(2&a){const t=n.XpG();n.R7$(),n.R50("ngModel",t.mensagemInput),n.R7$(),n.Y8G("disabled",!t.mensagemInput.trim())}}const M=[{path:"",component:(()=>{class a{constructor(t){this.http=t,this.mensagens=[],this.mensagemInput="",this.apiUrl="https://andreyzc.app.n8n.cloud/webhook/1f1c7a6a-0efa-41ff-b5cc-ae656cf6a7ec"}ngOnInit(){localStorage.removeItem("chatbotMensagens");const t=localStorage.getItem("chatbotMensagens");t&&(this.mensagens=JSON.parse(t))}enviarMensagem(){if(!this.mensagemInput.trim())return;const t=this.mensagemInput;this.mensagens.push({texto:t,usuario:1,timestamp:Date.now(),action:null}),this.salvarMensagens(),this.mensagemInput="";const o={texto:"",usuario:0,timestamp:Date.now(),action:null,digitando:!0};this.mensagens.push(o),this.http.post(this.apiUrl,{message:t}).subscribe({next:e=>{const s=this.mensagens.findIndex(v=>v.digitando);-1!==s&&this.mensagens.splice(s,1);const l={texto:e.texto||e.content||e.response||"Sem resposta",usuario:0,timestamp:Date.now(),action:e.action||null};this.mensagens.push(l),this.salvarMensagens()},error:e=>{console.error("Erro ao chamar API do chatbot:",e);const s=this.mensagens.findIndex(l=>l.digitando);-1!==s&&this.mensagens.splice(s,1),this.mensagens.push({texto:"Desculpe, ocorreu um erro ao processar sua mensagem.",usuario:0,timestamp:Date.now(),action:null}),this.salvarMensagens()}})}podeEnviar(){if(0===this.mensagens.length)return!0;const t=this.mensagens[this.mensagens.length-1];return null===t.action||1===t.usuario}salvarMensagens(){localStorage.setItem("chatbotMensagens",JSON.stringify(this.mensagens))}apagarConversa(){localStorage.removeItem("chatbotMensagens"),this.mensagens=[]}ngOnDestroy(){localStorage.removeItem("chatbotMensagens")}static#n=this.\u0275fac=function(o){return new(o||a)(n.rXU(h.Qq))};static#t=this.\u0275cmp=n.VBU({type:a,selectors:[["app-chatbot"]],standalone:!1,decls:9,vars:3,consts:[["color","transparent"],[1,"apagar-conversa-bar"],["expand","block",1,"botao",3,"click"],["name","trash","slot","start"],[1,"ion-padding",3,"fullscreen"],[1,"chat-mensagens"],[3,"ngClass",4,"ngFor","ngForOf"],["class","chat-input-bar",4,"ngIf"],[3,"ngClass"],[1,"msg-bubble"],[4,"ngIf"],["class","typing-indicator",4,"ngIf"],[1,"typing-indicator"],[1,"chat-input-bar"],["placeholder","Digite sua mensagem...",1,"chat-input",3,"ngModelChange","ngModel"],[3,"click","disabled"],["name","send"]],template:function(o,e){1&o&&(n.nrm(0,"ion-toolbar",0),n.j41(1,"div",1)(2,"ion-button",2),n.bIt("click",function(){return e.apagarConversa()}),n.nrm(3,"ion-icon",3),n.EFF(4," Apagar conversa "),n.k0s()(),n.j41(5,"ion-content",4)(6,"div",5),n.DNE(7,x,4,5,"div",6),n.k0s()(),n.DNE(8,C,4,2,"div",7)),2&o&&(n.R7$(5),n.Y8G("fullscreen",!0),n.R7$(2),n.Y8G("ngForOf",e.mensagens),n.R7$(),n.Y8G("ngIf",e.podeEnviar()))},dependencies:[g.YU,g.Sq,g.bT,d.BC,d.vS,r.Jm,r.W9,r.iq,r.$w,r.ai,r.Gw],styles:["ion-content.chat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 56px);padding-bottom:70px;--background: #E0F9FF}.chat-mensagens[_ngcontent-%COMP%]{flex:1;padding:16px;margin-top:100px;overflow-y:auto;display:flex;flex-direction:column;gap:12px}.msg-usuario[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:flex-end}.msg-usuario[_ngcontent-%COMP%]   .msg-bubble[_ngcontent-%COMP%]{max-width:70%;padding:12px 16px;border-radius:18px 18px 4px;font-size:15px;font-family:Outfit,sans-serif;background:#003554;color:#fff;box-shadow:0 2px 8px #00355433;word-wrap:break-word}.msg-chatbot[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:flex-start}.msg-chatbot[_ngcontent-%COMP%]   .msg-bubble[_ngcontent-%COMP%]{max-width:70%;padding:12px 16px;border-radius:18px 18px 18px 4px;font-size:15px;font-family:Outfit,sans-serif;background:#699ab7;color:#fff;box-shadow:0 2px 8px #699ab733;word-wrap:break-word}.chat-input-bar[_ngcontent-%COMP%]{margin-bottom:60px;position:fixed;left:0;right:0;bottom:0;z-index:100;display:flex;align-items:center;padding:12px;border-top:1px solid rgba(140,190,227,.3);background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);gap:8px}.chat-input[_ngcontent-%COMP%]{flex:1;--background: rgba(140, 190, 227, .15);--border-radius: 20px;--padding-start: 16px;--padding-end: 16px;--color: #003554;font-family:Outfit,sans-serif}.chat-input-bar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #003554;--border-radius: 50%;width:44px;height:44px;--padding-start: 0;--padding-end: 0}.chat-input-bar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:#fff}.chat-input-bar[_ngcontent-%COMP%]   ion-button[disabled][_ngcontent-%COMP%]{--background: rgba(140, 190, 227, .3)}.chat-input-bar[_ngcontent-%COMP%]   ion-button[disabled][_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#0035544d}.chat-mensagens[_ngcontent-%COMP%]{scroll-behavior:smooth}.typing-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:4px 0}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background-color:#fff;opacity:.6;animation:_ngcontent-%COMP%_typing 1.4s infinite}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){animation-delay:0s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.typing-indicator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){animation-delay:.4s}@keyframes _ngcontent-%COMP%_typing{0%,60%,to{opacity:.6;transform:translateY(0)}30%{opacity:1;transform:translateY(-8px)}}.msg-bubble.digitando[_ngcontent-%COMP%]{min-width:60px;display:flex;align-items:center;justify-content:center}@media (max-width: 576px){.msg-bubble[_ngcontent-%COMP%]{max-width:80%!important;font-size:14px!important}}.apagar-conversa-bar[_ngcontent-%COMP%]{width:100%;padding:16px 16px 0;background:transparent;z-index:101;position:relative}.apagar-conversa-bar[_ngcontent-%COMP%]{margin-top:10px;--background:#699AB7;--color: #fff;--border-radius: 20px;font-family:Outfit,sans-serif;font-weight:500;box-shadow:0 2px 8px #e74c3c14}"]})}return a})()}];let _=(()=>{class a{static#n=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=n.$C({type:a});static#a=this.\u0275inj=c.G2t({imports:[u.iI.forChild(M),u.iI]})}return a})(),P=(()=>{class a{static#n=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=n.$C({type:a});static#a=this.\u0275inj=c.G2t({imports:[g.MD,d.YN,r.bv,_]})}return a})()}}]);