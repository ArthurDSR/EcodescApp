"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6906],{6906:(j,g,o)=>{o.r(g),o.d(g,{AvaliacoesPageModule:()=>F});var r=o(2200),f=o(4341),c=o(9420),m=o(8132),p=o(467),a=o(3664),l=o(8728),v=o(2059),u=o(4192);function h(n,s){1&n&&a.nrm(0,"ion-icon",12),2&n&&a.Y8G("name",s.$implicit?"star":"star-outline")}function x(n,s){if(1&n&&(a.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),a.EFF(4),a.nI1(5,"number"),a.k0s(),a.j41(6,"div",9),a.DNE(7,h,1,1,"ion-icon",10),a.k0s(),a.j41(8,"div",11),a.EFF(9),a.k0s()()()()),2&n){const t=a.XpG();a.R7$(4),a.JRh(a.i5U(5,3,t.mediaAvaliacoes,"1.1-1")),a.R7$(3),a.Y8G("ngForOf",t.getStars(t.Math.round(t.mediaAvaliacoes))),a.R7$(2),a.SpI("",t.totalAvaliacoes," avalia\xe7\xf5es")}}function _(n,s){1&n&&(a.j41(0,"div",13),a.nrm(1,"ion-spinner",14),a.j41(2,"p"),a.EFF(3,"Carregando avalia\xe7\xf5es..."),a.k0s()())}function O(n,s){1&n&&(a.j41(0,"div",18),a.nrm(1,"ion-icon",19),a.j41(2,"h3"),a.EFF(3,"Nenhuma avalia\xe7\xe3o ainda"),a.k0s(),a.j41(4,"p"),a.EFF(5,"Seja o primeiro a avaliar esta empresa!"),a.k0s()())}function P(n,s){if(1&n&&a.nrm(0,"ion-icon",35),2&n){const t=s.$implicit;a.AVh("filled",t),a.Y8G("name",t?"star":"star-outline")}}function M(n,s){if(1&n){const t=a.RV6();a.j41(0,"ion-button",36),a.bIt("click",function(){l.eBV(t);const e=a.XpG().$implicit,d=a.XpG(2);return l.Njj(d.excluirAvaliacao(e.id))}),a.nrm(1,"ion-icon",37),a.k0s()}}function C(n,s){if(1&n&&(a.j41(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23),a.nrm(4,"ion-icon",24),a.k0s(),a.j41(5,"div",25)(6,"h3",26),a.EFF(7),a.k0s(),a.j41(8,"p",27),a.EFF(9),a.k0s()()(),a.j41(10,"div",28)(11,"div",29),a.DNE(12,P,1,3,"ion-icon",30),a.k0s(),a.j41(13,"span",31),a.EFF(14),a.k0s()(),a.DNE(15,M,2,0,"ion-button",32),a.k0s(),a.j41(16,"div",33)(17,"p",34),a.EFF(18),a.k0s()()()),2&n){const t=s.$implicit,i=a.XpG(2);a.R7$(7),a.JRh(t.nomeUsuario||"Usu\xe1rio #"+t.idUsuarioComum),a.R7$(2),a.JRh(i.formatarData(t.dataAvaliacao)),a.R7$(3),a.Y8G("ngForOf",i.getStars(t.nota)),a.R7$(2),a.SpI("",t.nota,".0"),a.R7$(),a.Y8G("ngIf",i.isAdmin),a.R7$(3),a.JRh(t.comentario)}}function b(n,s){if(1&n&&(a.j41(0,"div",15),a.DNE(1,O,6,0,"div",16)(2,C,19,6,"div",17),a.k0s()),2&n){const t=a.XpG();a.R7$(),a.Y8G("ngIf",0===t.avaliacoes.length),a.R7$(),a.Y8G("ngForOf",t.avaliacoes)}}const y=[{path:"",component:(()=>{class n{constructor(t,i,e){this.avaliacaoService=t,this.toastController=i,this.activatedRoute=e,this.avaliacoes=[],this.idEmpresa=0,this.carregando=!0,this.mediaAvaliacoes=0,this.totalAvaliacoes=0,this.Math=Math,this.isAdmin=!1}ngOnInit(){const t=localStorage.getItem("tipoUsuario");this.isAdmin="admin"===t;const i=this.activatedRoute.snapshot.params.idEmpresa;if(i)this.idEmpresa=parseInt(i);else{const e=localStorage.getItem("empresaId");e&&(this.idEmpresa=parseInt(e))}this.idEmpresa?this.carregarAvaliacoes():this.exibirMensagem("ID da empresa n\xe3o encontrado")}carregarAvaliacoes(){this.carregando=!0,this.avaliacaoService.listarAvaliacoesPorEmpresa(this.idEmpresa).subscribe({next:t=>{console.log("Avalia\xe7\xf5es carregadas:",t),this.avaliacoes=t,this.totalAvaliacoes=t.length,this.calcularMedia(),this.carregando=!1},error:t=>{console.error("Erro ao carregar avalia\xe7\xf5es:",t),this.exibirMensagem("Erro ao carregar avalia\xe7\xf5es"),this.carregando=!1}})}excluirAvaliacao(t){this.avaliacaoService.excluirAvaliacao(t).subscribe({next:()=>{this.exibirMensagem("Avalia\xe7\xe3o exclu\xedda com sucesso!"),this.carregarAvaliacoes()},error:()=>{this.exibirMensagem("Erro ao excluir avalia\xe7\xe3o.")}})}calcularMedia(){if(this.avaliacoes.length>0){const t=this.avaliacoes.reduce((i,e)=>i+e.nota,0);this.mediaAvaliacoes=t/this.avaliacoes.length}else this.mediaAvaliacoes=0}getStars(t){return Array(5).fill(!1).map((i,e)=>e<t)}formatarData(t){const i=new Date(t);return`${i.getDate().toString().padStart(2,"0")}/${(i.getMonth()+1).toString().padStart(2,"0")}/${i.getFullYear()}`}exibirMensagem(t){var i=this;return(0,p.A)(function*(){(yield i.toastController.create({message:t,duration:2e3,position:"top",color:"primary"})).present()})()}static#a=this.\u0275fac=function(i){return new(i||n)(a.rXU(v.J),a.rXU(c.K_),a.rXU(u.nX))};static#t=this.\u0275cmp=a.VBU({type:n,selectors:[["app-avaliacoes"]],standalone:!1,decls:5,vars:3,consts:[["color","transparent"],[1,"ion-padding"],["class","resumo-card",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","avaliacoes-list",4,"ngIf"],[1,"resumo-card"],[1,"resumo-content"],[1,"media-section"],[1,"media-numero"],[1,"estrelas-media"],["class","star-icon",3,"name",4,"ngFor","ngForOf"],[1,"total-avaliacoes"],[1,"star-icon",3,"name"],[1,"loading-container"],["name","crescent"],[1,"avaliacoes-list"],["class","sem-avaliacoes",4,"ngIf"],["class","avaliacao-card",4,"ngFor","ngForOf"],[1,"sem-avaliacoes"],["name","chatbox-outline",1,"icon-empty"],[1,"avaliacao-card"],[1,"avaliacao-header"],[1,"usuario-info"],[1,"avatar"],["name","person"],[1,"usuario-detalhes"],[1,"usuario-nome"],[1,"data-avaliacao"],[1,"nota-section"],[1,"estrelas"],["class","star-icon-small",3,"name","filled",4,"ngFor","ngForOf"],[1,"nota-numero"],["color","danger","fill","clear","size","small",3,"click",4,"ngIf"],[1,"avaliacao-body"],[1,"comentario"],[1,"star-icon-small",3,"name"],["color","danger","fill","clear","size","small",3,"click"],["name","trash"]],template:function(i,e){1&i&&(a.nrm(0,"ion-toolbar",0),a.j41(1,"ion-content",1),a.DNE(2,x,10,6,"div",2)(3,_,4,0,"div",3)(4,b,3,2,"div",4),a.k0s()),2&i&&(a.R7$(2),a.Y8G("ngIf",!e.carregando),a.R7$(),a.Y8G("ngIf",e.carregando),a.R7$(),a.Y8G("ngIf",!e.carregando))},dependencies:[r.Sq,r.bT,c.Jm,c.W9,c.iq,c.w2,c.ai,r.QX],styles:[".resumo-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8cbee34d,#8cbee326);border-radius:20px;padding:25px;margin:20px 0;box-shadow:0 4px 15px #0035541a}.resumo-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.media-section[_ngcontent-%COMP%]{text-align:center}.media-numero[_ngcontent-%COMP%]{font-size:56px;font-weight:700;color:#003554;font-family:Outfit,sans-serif;line-height:1;margin-bottom:10px}.estrelas-media[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:5px;margin-bottom:10px}.estrelas-media[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{font-size:28px;color:gold}.total-avaliacoes[_ngcontent-%COMP%]{color:#003554;font-size:16px;font-weight:500;font-family:Outfit,sans-serif;opacity:.8}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#003554}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:50px;height:50px;color:#8cbee3}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;font-family:Outfit,sans-serif;font-size:16px}.sem-avaliacoes[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#003554}.sem-avaliacoes[_ngcontent-%COMP%]   .icon-empty[_ngcontent-%COMP%]{font-size:80px;color:#8cbee380;margin-bottom:20px}.sem-avaliacoes[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Outfit,sans-serif;font-weight:600;font-size:22px;margin-bottom:10px}.sem-avaliacoes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:Outfit,sans-serif;opacity:.7;font-size:16px}.avaliacoes-list[_ngcontent-%COMP%]{margin-top:20px}.avaliacao-card[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:15px;padding:20px;margin-bottom:15px;box-shadow:0 2px 10px #00355414;border:1px solid rgba(140,190,227,.2);transition:transform .2s,box-shadow .2s}.avaliacao-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #00355426}.avaliacao-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px}.usuario-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:linear-gradient(135deg,#8cbee3,#699ab7);display:flex;align-items:center;justify-content:center}.avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px;color:#fff}.usuario-detalhes[_ngcontent-%COMP%]{display:flex;flex-direction:column}.usuario-nome[_ngcontent-%COMP%]{font-family:Outfit,sans-serif;font-weight:600;font-size:16px;color:#003554;margin:0}.data-avaliacao[_ngcontent-%COMP%]{font-family:Outfit,sans-serif;font-size:13px;color:#666;margin:2px 0 0}.nota-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:5px}.estrelas[_ngcontent-%COMP%]{display:flex;gap:3px}.star-icon-small[_ngcontent-%COMP%]{font-size:16px;color:#ccc}.star-icon-small.filled[_ngcontent-%COMP%]{color:gold}.nota-numero[_ngcontent-%COMP%]{font-family:Outfit,sans-serif;font-size:14px;font-weight:600;color:#003554}.avaliacao-body[_ngcontent-%COMP%]{padding-top:10px;border-top:1px solid rgba(140,190,227,.2)}.comentario[_ngcontent-%COMP%]{font-family:Outfit,sans-serif;font-size:15px;line-height:1.6;color:#003554;margin:0;word-wrap:break-word}@media (max-width: 576px){.media-numero[_ngcontent-%COMP%]{font-size:48px}.estrelas-media[_ngcontent-%COMP%]   .star-icon[_ngcontent-%COMP%]{font-size:24px}.avaliacao-card[_ngcontent-%COMP%]{padding:15px}.usuario-nome[_ngcontent-%COMP%]{font-size:15px}.comentario[_ngcontent-%COMP%]{font-size:14px}}"]})}return n})()}];let A=(()=>{class n{static#a=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.$C({type:n});static#n=this.\u0275inj=l.G2t({imports:[m.iI.forChild(y),m.iI]})}return n})(),F=(()=>{class n{static#a=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=a.$C({type:n});static#n=this.\u0275inj=l.G2t({imports:[r.MD,f.YN,c.bv,A]})}return n})()}}]);